name: 'Telegram send message with button'
description: 'Send message to Telegram'
inputs:
  message:
    description: 'message'
    required: true
  chat_id:
    description: 'chat_id'
    required: true
  silent_mode:
    description: 'true/false'
    required: false
    default: "false"
  tg_url:
    description: 'tg_url'
    required: true
  parse_mode:
    description: 'parse_mode'
    default: 'html'
    required: false
  button_link:
    description: 'Ссылка которая будет открыта по нажатию на кнопку'
    required: true
  button_text:
    description: 'Текст внутри кнопки'
    required: true

runs:
  using: "composite"
  steps:
    - name: Send message
      shell: bash
      run: |
        body="{"chat_id": "${{ inputs.chat_id }}", "text": "${{ inputs.message }}", "reply_markup": {"inline_keyboard": [[{ "text": "${{ inputs.button_text }}", "url": "${{ inputs.button_link }}" }]]}}}"
        curl -H "Content-Type: application/json" \
        -d  $body \
        "${{ inputs.tg_url }}/sendMessage"